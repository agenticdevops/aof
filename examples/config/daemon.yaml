# AOF Daemon Configuration
#
# Minimal configuration for AOF daemon with Trigger-based architecture.
# Platform configuration is now embedded in Trigger files (examples/triggers/).
#
# Prerequisites:
#   Set environment variables for enabled platforms:
#   - Slack:    SLACK_BOT_TOKEN, SLACK_SIGNING_SECRET
#   - Telegram: TELEGRAM_BOT_TOKEN
#   - LLM:      GOOGLE_API_KEY (or ANTHROPIC_API_KEY/OPENAI_API_KEY)
#
# Usage:
#   export SLACK_BOT_TOKEN=xoxb-xxxxx
#   export SLACK_SIGNING_SECRET=xxxxx
#   export TELEGRAM_BOT_TOKEN=xxxxx
#   export GOOGLE_API_KEY=xxxxx
#
#   aofctl serve --config examples/config/daemon.yaml
#
# Expose webhooks (choose one):
#   # Cloudflared (recommended - no signup needed):
#   brew install cloudflared
#   cloudflared tunnel --url http://localhost:3000
#
#   # Or ngrok (requires free account):
#   ngrok http 3000
#
# Webhook URLs:
#   Slack:    https://your-tunnel-url/webhook/slack
#   Telegram: https://your-tunnel-url/webhook/telegram

apiVersion: aof.dev/v1
kind: DaemonConfig
metadata:
  name: aof-daemon
  labels:
    environment: development

spec:
  # =============================================================================
  # Server Configuration
  # =============================================================================
  server:
    port: 3000
    host: 0.0.0.0
    cors: true
    timeout_secs: 60

  # =============================================================================
  # Triggers Configuration
  #
  # Triggers are self-contained platform definitions with command bindings.
  # Each Trigger file includes: platform config + commands + default agent.
  # See examples/triggers/ for Slack, Telegram, and other platform examples.
  # =============================================================================
  triggers:
    directory: ./examples/triggers/
    watch: false

  # =============================================================================
  # Agent Configuration
  # =============================================================================
  agents:
    directory: ./examples/agents/
    watch: false

  # =============================================================================
  # Fleet Configuration
  # Fleets are teams of agents that work together for complex tasks
  # =============================================================================
  fleets:
    directory: ./examples/fleets/
    watch: false

  # =============================================================================
  # AgentFlow Configuration (Optional)
  # Enables multi-step workflows with approval gates, loops, etc.
  # =============================================================================
  flows:
    directory: ./examples/flows/
    watch: false
    enabled: true

  # =============================================================================
  # Runtime Configuration
  # =============================================================================
  runtime:
    max_concurrent_tasks: 10
    task_timeout_secs: 300
    max_tasks_per_user: 5
    default_agent: devops
